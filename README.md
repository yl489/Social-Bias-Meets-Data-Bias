# Social Bias Meets Data Bias

This is the code release for [*Social Bias Meets Data Bias: The Impacts of Labeling and Measurement Errors on Fairness Criteria*](https://arxiv.org/abs/2206.00137) by Yiqiao Liao and [Parinaz Naghizadeh](https://parinazn.com/).

## Requirements

- fairlearn==0.6.2
- matplotlib==3.3.3
- numpy==1.19.5
- pandas==1.2.1
- scikit_learn==1.1.0

## Instructions

Code for generating main plots in the paper is included in [notebooks](notebooks).

- The FICO and synthetic data results can be generated by running the notebooks alone.
- The Adult and German results are obtained by running the experiments using the [commands](#commands-for-running-adult-and-german-experiments). The statistics will be stored as `.npz` files. The plots in the paper are generated by the code in the notebooks using the statistics in this [folder](notebooks/adult_german_results).

## Command-line Arguments

- --d \<dataset\>
  - Supported options: `adult`, `german`
- --c \<constraint\>
  - Supported options: `DP`, `TPR`, `FPR`, `EO`
- --db \<difference bound\>
  - A floating point number (default value: `0.01`)
- --m \<metrics\>
  - Supported options: `dp`, `tpr`, `fpr`, `eo`
- --f \<flip\>
  - Supported options: `1` (flip qualified disadvantaged), `2` (flip unqualified advantaged), `3` (flip both)
- --n \<iterations\>
  - An integer number (e.g., `10`)

## Commands for Running Adult and German Experiments

### Adult - flip qualified female

```python
adult_german_runner.py --d adult --c DP --m dp --f 1 --n 10
```

```python
adult_german_runner.py --d adult --c TPR --m tpr --f 1 --n 10
```

```python
adult_german_runner.py --d adult --c FPR --m fpr --f 1 --n 10
```

```python
adult_german_runner.py --d adult --c EO --m eo --f 1 --n 10
```

### Adult - flip unqualified male

```python
adult_german_runner.py --d adult --c DP --m dp --f 2 --n 10
```

```python
adult_german_runner.py --d adult --c TPR --m tpr --f 2 --n 10
```

```python
adult_german_runner.py --d adult --c FPR --m fpr --f 2 --n 10
```

```python
adult_german_runner.py --d adult --c EO --m eo --f 2 --n 10
```

### Adult - flip both

```python
adult_german_runner.py --d adult --c DP --m dp --f 3 --n 10
```

```python
adult_german_runner.py --d adult --c TPR --m tpr --f 3 --n 10
```

```python
adult_german_runner.py --d adult --c FPR --m fpr --f 3 --n 10
```

```python
adult_german_runner.py --d adult --c EO --m eo --f 3 --n 10
```

### German - flip qualified age below 30

```python
adult_german_runner.py --d german --c DP --m dp --f 1 --n 30
```

```python
adult_german_runner.py --d german --c TPR --m tpr --f 1 --n 30
```

```python
adult_german_runner.py --d german --c FPR --m fpr --f 1 --n 30
```

```python
adult_german_runner.py --d german --c EO --m eo --f 1 --n 30
```

### German - flip unqualified age above 30

```python
adult_german_runner.py --d german --c DP --m dp --f 2 --n 30
```

```python
adult_german_runner.py --d german --c TPR --m tpr --f 2 --n 30
```

```python
adult_german_runner.py --d german --c FPR --m fpr --f 2 --n 30
```

```python
adult_german_runner.py --d german --c EO --m eo --f 2 --n 30
```

### German - flip both

```python
adult_german_runner.py --d german --c DP --m dp --f 3 --n 30
```

```python
adult_german_runner.py --d german --c TPR --m tpr --f 3 --n 30
```

```python
adult_german_runner.py --d german --c FPR --m fpr --f 3 --n 30
```

```python
adult_german_runner.py --d german --c EO --m eo --f 3 --n 30
```
